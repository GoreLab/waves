<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Save spectral prediction model and model performance statistics — save_model • waves</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Save spectral prediction model and model performance statistics — save_model"><meta name="description" content="Given a set of pretreatment methods, saves the best spectral
prediction model and model statistics to model.save.folder as
model.name.Rds and model.name_stats.csv respectively. If only
one pretreatment method is supplied, results from that method are stored."><meta property="og:description" content="Given a set of pretreatment methods, saves the best spectral
prediction model and model statistics to model.save.folder as
model.name.Rds and model.name_stats.csv respectively. If only
one pretreatment method is supplied, results from that method are stored."><meta property="og:image" content="https://GoreLab.github.io/waves/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">waves</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/waves.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GoreLab/waves/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Save spectral prediction model and model performance statistics</h1>
      <small class="dont-index">Source: <a href="https://github.com/GoreLab/waves/blob/main/R/save_model.R" class="external-link"><code>R/save_model.R</code></a></small>
      <div class="d-none name"><code>save_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a set of pretreatment methods, saves the best spectral
prediction model and model statistics to <code>model.save.folder</code> as
<code>model.name.Rds</code> and <code>model.name_stats.csv</code> respectively. If only
one pretreatment method is supplied, results from that method are stored.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">save_model</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  write.model <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pretreatment <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  model.save.folder <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  model.name <span class="op">=</span> <span class="st">"PredictionModel"</span>,</span>
<span>  best.model.metric <span class="op">=</span> <span class="st">"RMSE"</span>,</span>
<span>  k.folds <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  proportion.train <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  tune.length <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  model.method <span class="op">=</span> <span class="st">"pls"</span>,</span>
<span>  num.iterations <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  stratified.sampling <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cv.scheme <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trial1 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trial2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trial3 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  save.model <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  wavelengths <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  autoselect.preprocessing <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  preprocessing.method <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p><code>data.frame</code> object. First column contains unique identifiers,
second contains reference values, followed by spectral columns. Include no
other columns to right of spectra! Column names of spectra must start with
"X" and reference column must be named "reference"</p></dd>


<dt id="arg-write-model">write.model<a class="anchor" aria-label="anchor" href="#arg-write-model"></a></dt>
<dd><p>If <code>TRUE</code>, the trained model will be saved in .Rds
format to the location specified by <code>model.save.folder</code>. If
<code>FALSE</code>, the best model will be output by the function but will not
save to a file. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-pretreatment">pretreatment<a class="anchor" aria-label="anchor" href="#arg-pretreatment"></a></dt>
<dd><p>Number or list of numbers 1:13 corresponding to
  desired pretreatment method(s):</p><ol><li><p>Raw data (default)</p></li>
<li><p>Standard normal variate (SNV)</p></li>
<li><p>SNV and first derivative</p></li>
<li><p>SNV and second derivative</p></li>
<li><p>First derivative</p></li>
<li><p>Second derivative</p></li>
<li><p>Savitzky–Golay filter (SG)</p></li>
<li><p>SNV and SG</p></li>
<li><p>Gap-segment derivative (window size = 11)</p></li>
<li><p>SG and first derivative (window size = 5)</p></li>
<li><p>SG and first derivative (window size = 11)</p></li>
<li><p>SG and second derivative (window size = 5)</p></li>
<li><p>SG and second derivative (window size = 11)</p></li>
</ol></dd>


<dt id="arg-model-save-folder">model.save.folder<a class="anchor" aria-label="anchor" href="#arg-model-save-folder"></a></dt>
<dd><p>Path to folder where model will be saved. If not
provided, will save to working directory.</p></dd>


<dt id="arg-model-name">model.name<a class="anchor" aria-label="anchor" href="#arg-model-name"></a></dt>
<dd><p>Name that model will be saved as in
<code>model.save.folder</code>. Default is "PredictionModel".</p></dd>


<dt id="arg-best-model-metric">best.model.metric<a class="anchor" aria-label="anchor" href="#arg-best-model-metric"></a></dt>
<dd><p>Metric used to decide which model is best. Must be
either "RMSE" or "Rsquared"</p></dd>


<dt id="arg-k-folds">k.folds<a class="anchor" aria-label="anchor" href="#arg-k-folds"></a></dt>
<dd><p>Number indicating the number of folds for k-fold
cross-validation during model training. Default is 5.</p></dd>


<dt id="arg-proportion-train">proportion.train<a class="anchor" aria-label="anchor" href="#arg-proportion-train"></a></dt>
<dd><p>Fraction of samples to include in the training set.
Default is 0.7.</p></dd>


<dt id="arg-tune-length">tune.length<a class="anchor" aria-label="anchor" href="#arg-tune-length"></a></dt>
<dd><p>Number delineating search space for tuning of the PLSR
hyperparameter <code>ncomp</code>. Must be set to 5 when using the random forest
algorithm (<code>model.method == rf</code>). Default is 50.</p></dd>


<dt id="arg-model-method">model.method<a class="anchor" aria-label="anchor" href="#arg-model-method"></a></dt>
<dd><p>Model type to use for training. Valid options include:</p><ul><li><p>"pls": Partial least squares regression (Default)</p></li>
<li><p>"rf": Random forest</p></li>
<li><p>"svmLinear": Support vector machine with linear
kernel</p></li>
<li><p>"svmRadial": Support vector machine with radial kernel</p></li>
</ul></dd>


<dt id="arg-num-iterations">num.iterations<a class="anchor" aria-label="anchor" href="#arg-num-iterations"></a></dt>
<dd><p>Number of training iterations to perform</p></dd>


<dt id="arg-stratified-sampling">stratified.sampling<a class="anchor" aria-label="anchor" href="#arg-stratified-sampling"></a></dt>
<dd><p>If <code>TRUE</code>, training and test sets will be
selected using stratified random sampling. This term is only used if
<code>test.data == NULL</code>. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-cv-scheme">cv.scheme<a class="anchor" aria-label="anchor" href="#arg-cv-scheme"></a></dt>
<dd><p>A cross validation (CV) scheme from Jarquín et al., 2017.
Options for <code>cv.scheme</code> include:</p><ul><li><p>"CV1": untested lines in tested environments</p></li>
<li><p>"CV2": tested lines in tested environments</p></li>
<li><p>"CV0": tested lines in untested environments</p></li>
<li><p>"CV00": untested lines in untested environments</p></li>
</ul></dd>


<dt id="arg-trial-">trial1<a class="anchor" aria-label="anchor" href="#arg-trial-"></a></dt>
<dd><p><code>data.frame</code> object that is for use only when
<code>cv.scheme</code> is provided. Contains the trial to be tested in subsequent
model training functions. The first column contains unique identifiers,
second contains genotypes, third contains reference values, followed by
spectral columns. Include no other columns to right of spectra! Column
names of spectra must start with "X", reference column must be named
"reference", and genotype column must be named "genotype".</p></dd>


<dt id="arg-trial-">trial2<a class="anchor" aria-label="anchor" href="#arg-trial-"></a></dt>
<dd><p><code>data.frame</code> object that is for use only when
<code>cv.scheme</code> is provided. This data.frame contains a trial that has
overlapping genotypes with <code>trial1</code> but that were grown in a different
site/year (different environment). Formatting must be consistent with
<code>trial1</code>.</p></dd>


<dt id="arg-trial-">trial3<a class="anchor" aria-label="anchor" href="#arg-trial-"></a></dt>
<dd><p><code>data.frame</code> object that is for use only when
<code>cv.scheme</code> is provided. This data.frame contains a trial that may or
may not contain genotypes that overlap with <code>trial1</code>. Formatting must
be consistent with <code>trial1</code>.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Integer to be used internally as input for <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code>.
Only used if <code>stratified.sampling = TRUE</code>. In all other cases, seed
is set to the current iteration number. Default is 1.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>If <code>TRUE</code>, the number of rows removed through filtering
will be printed to the console. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-save-model">save.model<a class="anchor" aria-label="anchor" href="#arg-save-model"></a></dt>
<dd><p>DEPRECATED <code>save.model = FALSE</code> is no
longer supported; this function will always return a saved model.</p></dd>


<dt id="arg-wavelengths">wavelengths<a class="anchor" aria-label="anchor" href="#arg-wavelengths"></a></dt>
<dd><p>DEPRECATED <code>wavelengths</code> is no
longer supported; this information is now inferred from <code>df</code>
column names</p></dd>


<dt id="arg-autoselect-preprocessing">autoselect.preprocessing<a class="anchor" aria-label="anchor" href="#arg-autoselect-preprocessing"></a></dt>
<dd><p>DEPRECATED
<code>autoselect.preprocessing = FALSE</code> is no longer supported. If
multiple pretreatment methods are supplied, the best will be automatically
selected as the model to be saved.</p></dd>


<dt id="arg-preprocessing-method">preprocessing.method<a class="anchor" aria-label="anchor" href="#arg-preprocessing-method"></a></dt>
<dd><p>DEPRECATED <code>preprocessing.method</code>
has been renamed "pretreatment"</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of model stats (in <code>data.frame</code>) and trained model object.
  If the parameter <code>write.model</code> is TRUE, both objects are saved to
  <code>model.save.folder</code>. To use the optimally trained model for
  predictions, use tuned parameters from <code>$bestTune</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Wrapper that uses <code><a href="pretreat_spectra.html">pretreat_spectra</a></code>,
  <code><a href="format_cv.html">format_cv</a></code>, and <code><a href="train_spectra.html">train_spectra</a></code> functions.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jenna Hershberger <a href="mailto:jmh579@cornell.edu">jmh579@cornell.edu</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">test.model</span> <span class="op">&lt;-</span> <span class="va">ikeogu.2017</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">study.name</span> <span class="op">==</span> <span class="st">"C16Mcal"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>reference <span class="op">=</span> <span class="va">DMC.oven</span>,</span></span>
<span class="r-in"><span>                unique.id <span class="op">=</span> <span class="va">sample.id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">unique.id</span>, <span class="va">reference</span>, <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"X"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">save_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>    df <span class="op">=</span> <span class="va">.</span>,</span></span>
<span class="r-in"><span>    write.model <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>    pretreatment <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">13</span>,</span></span>
<span class="r-in"><span>    model.name <span class="op">=</span> <span class="st">"my_prediction_model"</span>,</span></span>
<span class="r-in"><span>    tune.length <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>    num.iterations <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `save.model` argument of `test_spectra()` is deprecated as of waves 0.2.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Models are now saved by default.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">waves</span> package.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Please report the issue at <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/GoreLab/waves/issues&gt;</span>.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `return.model` argument of `test_spectra()` is deprecated as of waves</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> 0.2.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Trained models are now returned by default.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">waves</span> package.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Please report the issue at <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/GoreLab/waves/issues&gt;</span>.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pretreatment initiated.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Training models...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on Raw_data </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `wavelengths` argument of `train_spectra()` is deprecated as of waves</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> 0.2.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Wavelength specification is now inferred from column names.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">waves</span> package.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Please report the issue at <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/GoreLab/waves/issues&gt;</span>.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `preprocessing` argument of `train_spectra()` is deprecated as of waves</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> 0.2.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Argument `preprocessing` is deprecated. Use `pretreatment` instead:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   `pretreatment = 1:13` (all), or `pretreatment = 1` (raw only).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">waves</span> package.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Please report the issue at <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/GoreLab/waves/issues&gt;</span>.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `save.model` argument of `train_spectra()` is deprecated as of waves 0.2.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Models are now saved by default.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">waves</span> package.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Please report the issue at <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/GoreLab/waves/issues&gt;</span>.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: lattice</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘pls’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:caret’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     R2</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     loadings</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SNV </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SNV1D </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SNV2D </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on D1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on D2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SG </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SNVSG </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SGD1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SG.D1W5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SG.D1W11 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SG.D2W5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Working on SG.D2W11 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Returning model...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Training Summary:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 13 × 40</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Pretreatment RMSEp_mean R2p_mean RPD_mean RPIQ_mean CCC_mean Bias_mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> Raw_data           2.17   0.774     2.16       2.50    0.873    0.141 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> SNV                1.73   0.860     2.64       3.28    0.916   -<span style="color: #BB0000;">0.080</span><span style="color: #BB0000; text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> SNV1D              2.61   0.704     1.74       2.18    0.781   -<span style="color: #BB0000;">0.119</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> SNV2D              4.56   0.032<span style="text-decoration: underline;">3</span>    0.992      1.25    0.118    0.420 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> D1                 2.46   0.720     1.86       2.31    0.799   -<span style="color: #BB0000;">0.053</span><span style="color: #BB0000; text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> D2                 4.56   0.032<span style="text-decoration: underline;">9</span>    0.992      1.25    0.117    0.449 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> SG                 2.06   0.817     2.20       2.74    0.886   -<span style="color: #BB0000;">0.245</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> SNVSG              1.70   0.863     2.69       3.33    0.918   -<span style="color: #BB0000;">0.081</span><span style="color: #BB0000; text-decoration: underline;">3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> SGD1               2.02   0.801     2.27       2.81    0.880   -<span style="color: #BB0000;">0.158</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> SG.D1W5            2.05   0.798     2.25       2.79    0.869   -<span style="color: #BB0000;">0.149</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> SG.D1W11           1.97   0.809     2.33       2.89    0.884   -<span style="color: #BB0000;">0.165</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> SG.D2W5            4.32   0.095<span style="text-decoration: underline;">0</span>    1.05       1.32    0.213    0.199 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> SG.D2W11           2.70   0.665     1.70       2.11    0.759    0.057<span style="text-decoration: underline;">8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 33 more variables: SEP_mean &lt;dbl&gt;, RMSEcv_mean &lt;dbl&gt;, R2cv_mean &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   R2sp_mean &lt;dbl&gt;, best.ncomp_mean &lt;dbl&gt;, best.ntree_mean &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   best.mtry_mean &lt;dbl&gt;, RMSEp_sd &lt;dbl&gt;, R2p_sd &lt;dbl&gt;, RPD_sd &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   RPIQ_sd &lt;dbl&gt;, CCC_sd &lt;dbl&gt;, Bias_sd &lt;dbl&gt;, SEP_sd &lt;dbl&gt;, RMSEcv_sd &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   R2cv_sd &lt;dbl&gt;, R2sp_sd &lt;dbl&gt;, best.ncomp_sd &lt;dbl&gt;, best.ntree_sd &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   best.mtry_sd &lt;dbl&gt;, RMSEp_mode &lt;dbl&gt;, R2p_mode &lt;dbl&gt;, RPD_mode &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   RPIQ_mode &lt;dbl&gt;, CCC_mode &lt;dbl&gt;, Bias_mode &lt;dbl&gt;, SEP_mode &lt;dbl&gt;, …</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Best pretreatment technique: SNVSG</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">test.model</span><span class="op">$</span><span class="va">best.model</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data: 	X dimension: 120 2141 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Y dimension: 120 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fit method: kernelpls</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of components considered: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TRAINING: % variance explained</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1 comps  2 comps  3 comps</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X            64.48    87.94    91.43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> reference    33.93    64.97    87.18</span>
<span class="r-in"><span><span class="va">test.model</span><span class="op">$</span><span class="va">best.model.stats</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 40</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Pretreatment RMSEp_mean R2p_mean RPD_mean RPIQ_mean CCC_mean Bias_mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> SNVSG              1.70    0.863     2.69      3.33    0.918   -<span style="color: #BB0000;">0.081</span><span style="color: #BB0000; text-decoration: underline;">3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 33 more variables: SEP_mean &lt;dbl&gt;, RMSEcv_mean &lt;dbl&gt;, R2cv_mean &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   R2sp_mean &lt;dbl&gt;, best.ncomp_mean &lt;dbl&gt;, best.ntree_mean &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   best.mtry_mean &lt;dbl&gt;, RMSEp_sd &lt;dbl&gt;, R2p_sd &lt;dbl&gt;, RPD_sd &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   RPIQ_sd &lt;dbl&gt;, CCC_sd &lt;dbl&gt;, Bias_sd &lt;dbl&gt;, SEP_sd &lt;dbl&gt;, RMSEcv_sd &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   R2cv_sd &lt;dbl&gt;, R2sp_sd &lt;dbl&gt;, best.ncomp_sd &lt;dbl&gt;, best.ntree_sd &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   best.mtry_sd &lt;dbl&gt;, RMSEp_mode &lt;dbl&gt;, R2p_mode &lt;dbl&gt;, RPD_mode &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   RPIQ_mode &lt;dbl&gt;, CCC_mode &lt;dbl&gt;, Bias_mode &lt;dbl&gt;, SEP_mode &lt;dbl&gt;, …</span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://jmh579.github.io" class="external-link">Jenna Hershberger</a>, NSF BREAD IOS-1543958.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

